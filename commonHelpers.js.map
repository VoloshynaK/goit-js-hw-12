{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '42482643-27153583581e8cdd5359a7a52';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport class ImgService {\n    constructor() {\n        this.searchQuery = '';\n        this.page = 1;\n    }\n\n    async fetchImg() {\n        const searchParams = new URLSearchParams({\n            key: API_KEY,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: this.page,\n            per_page: 15,\n        });\n\n       \n        try {\n            const response = await axios.get(`?q=${this.searchQuery}&${searchParams}`);\n            const data = await response.data;\n            this.page += 1;\n            return data;\n        } catch (err) {\n           throw new Error(err);\n        }\n        \n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst galleryList = document.querySelector('.gallery')\n\nexport function makeCardMarkup(images) {\n    const card = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `\n        <li class=\"gallery-item\">\n          <a class=\"img-link\" href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"img\"/>\n          </a>  \n          <ul class=\"stat\">\n            <li class=\"stat-item\">\n                <span class=\"stat-title\">Likes</span>\n              <span class=\"stat-number\">${likes}</span>\n            </li>\n            <li class=\"stat-item\">\n                <span class=\"stat-title\">Views</span>\n              <span class=\"stat-number\">${views}</span>\n            </li>\n            <li class=\"stat-item\">\n                <span class=\"stat-title\">Comments</span>\n              <span class=\"stat-number\">${comments}</span>\n            </li>\n            <li class=\"stat-item\">\n                <span class=\"stat-title\">Downloads</span>\n              <span class=\"stat-number\">${downloads}</span>\n            </li>\n          </ul>\n        </li>`;\n    }).join('');\n\n    galleryList.insertAdjacentHTML('beforeend', card);\n\n    const lightbox = new SimpleLightbox(\".gallery a\", {\n        captionsData: \"alt\",\n        captionDelay: 250,\n        captionType: \"alt\",\n    });\n    lightbox.on('show.simplelightbox');\n    lightbox.refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { ImgService } from \"./js/pixabay-api\";\nimport { makeCardMarkup } from \"./js/render-functions\";\n\nconst formEl = document.querySelector(\".form\");\nconst inputEl = document.querySelector('.input');\nconst loaderCont = document.querySelector('.loader-container');\nconst galleryList = document.querySelector('.gallery');\nconst loadBtn = document.querySelector(\".load-btn\");\n\nconst imgServ = new ImgService();\n\nloadBtn.style.display = 'none';\n\nformEl.addEventListener('submit', onBtnSearch);\nloadBtn.addEventListener('click', onLoadMore);\n\n\nasync function onBtnSearch(e) {\n    e.preventDefault();\n    imgServ.searchQuery = inputEl.value;\n    imgServ.page = 1;\n\n    try {\n        const data = await imgServ.fetchImg();\n        loaderCont.style.display = 'flex';\n        formEl.reset();\n        galleryList.innerHTML = '';\n        const { totalHits, hits } = data;\n        if (totalHits === 0) {\n            loaderCont.style.display = 'none';\n            loadBtn.style.display = 'none';\n            return iziToast.warning({\n                title: '',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: \"topCenter\",\n            });  \n        };\n        setTimeout(() => {\n            loaderCont.style.display = 'none';\n            makeCardMarkup(hits);\n            loadBtn.style.display = 'flex';\n        }, 2000);\n\n    } catch (err) {\n        return iziToast.error({\n            title: '',\n            message: 'Something went wrong. Please try again!',\n            position: 'topCenter',\n        }) \n    }\n}\n\nasync function onLoadMore() {\n    try {\n        loaderCont.style.display = 'flex';\n\n        const data = await imgServ.fetchImg();\n        const { totalHits, hits } = data;\n\n        setTimeout(() => {\n            loaderCont.style.display = 'none';\n            makeCardMarkup(hits);\n        }, 2000);\n\n        const numOfPages = totalHits / 15;\n        if (imgServ.page >= numOfPages) {\n            loadBtn.style.display = 'none';\n           return iziToast.warning({\n                title: '',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topCenter\",\n            }); \n        }\n\n        const galleryItem = document.querySelector('.gallery-item');\n        const cardSize = galleryItem.getBoundingClientRect().height;\n        setTimeout(() => {\n            window.scrollBy({\n                top: cardSize,\n                behavior: 'smooth'\n            })\n        }, 200);\n\n\n    } catch (err) {\n        return iziToast.error({\n            title: '',\n            message: 'Something went wrong. Please try again!',\n            position: 'topCenter',\n        }) \n    }\n}\n"],"names":["API_KEY","axios","ImgService","searchParams","data","err","galleryList","makeCardMarkup","images","card","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","formEl","inputEl","loaderCont","loadBtn","imgServ","onBtnSearch","onLoadMore","e","totalHits","hits","iziToast","numOfPages","cardSize"],"mappings":"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"}